<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Rocket.chat Setup on LXC Container | The 8-bit Brain</title><meta name=keywords content="Blog,Setup,Homelab,Proxmox,LXC,Rocket.chat"><meta name=description content="Rocket.chat Setup This a basic guide on how we can install Rocket.chat on Ubuntu LXC.
This is a part 1 of 2 part series. In this part, we will look into how to install MongoDB, NodeJS & Rocket.Chat and also configure them.
In the next part, we will see how to reverse proxy the localhost:3000 to a domain and install SSL certificate.
Requirements Ubuntu: 20.04 NodeJS: 14.19.3 NPM: 6.14.17 Mongodb: 5."><meta name=author content="Masumul Hassan"><link rel=canonical href=https://masum.me/posts/rocket-chat-setup-on-lxc/><link crossorigin=anonymous href=/assets/css/stylesheet.23c844c8658b42a3c66d430d1664aea4f7bcf4e952c6fbb96ce1012b00cb0fd8.css integrity="sha256-I8hEyGWLQqPGbUMNFmSupPe89OlSxvu5bOEBKwDLD9g=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://masum.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://masum.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://masum.me/favicon-32x32.png><link rel=apple-touch-icon href=https://masum.me/apple-touch-icon.png><link rel=mask-icon href=https://masum.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-LTR5L2PYKX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LTR5L2PYKX",{anonymize_ip:!1})}</script><meta property="og:title" content="Rocket.chat Setup on LXC Container"><meta property="og:description" content="Rocket.chat Setup This a basic guide on how we can install Rocket.chat on Ubuntu LXC.
This is a part 1 of 2 part series. In this part, we will look into how to install MongoDB, NodeJS & Rocket.Chat and also configure them.
In the next part, we will see how to reverse proxy the localhost:3000 to a domain and install SSL certificate.
Requirements Ubuntu: 20.04 NodeJS: 14.19.3 NPM: 6.14.17 Mongodb: 5."><meta property="og:type" content="article"><meta property="og:url" content="https://masum.me/posts/rocket-chat-setup-on-lxc/"><meta property="og:image" content="https://images.unsplash.com/photo-1510843572979-e4b9e790fdd7?auto=format&fit=crop&w=720&q=80"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-05T00:00:00+00:00"><meta property="article:modified_time" content="2022-09-05T00:00:00+00:00"><meta property="og:site_name" content="The 8-bit Brain"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://images.unsplash.com/photo-1510843572979-e4b9e790fdd7?auto=format&fit=crop&w=720&q=80"><meta name=twitter:title content="Rocket.chat Setup on LXC Container"><meta name=twitter:description content="Rocket.chat Setup This a basic guide on how we can install Rocket.chat on Ubuntu LXC.
This is a part 1 of 2 part series. In this part, we will look into how to install MongoDB, NodeJS & Rocket.Chat and also configure them.
In the next part, we will see how to reverse proxy the localhost:3000 to a domain and install SSL certificate.
Requirements Ubuntu: 20.04 NodeJS: 14.19.3 NPM: 6.14.17 Mongodb: 5."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://masum.me/posts/"},{"@type":"ListItem","position":3,"name":"Rocket.chat Setup on LXC Container","item":"https://masum.me/posts/rocket-chat-setup-on-lxc/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Rocket.chat Setup on LXC Container","name":"Rocket.chat Setup on LXC Container","description":"Rocket.chat Setup This a basic guide on how we can install Rocket.chat on Ubuntu LXC.\nThis is a part 1 of 2 part series. In this part, we will look into how to install MongoDB, NodeJS \u0026amp; Rocket.Chat and also configure them.\nIn the next part, we will see how to reverse proxy the localhost:3000 to a domain and install SSL certificate.\nRequirements Ubuntu: 20.04 NodeJS: 14.19.3 NPM: 6.14.17 Mongodb: 5.","keywords":["Blog","Setup","Homelab","Proxmox","LXC","Rocket.chat"],"articleBody":"Rocket.chat Setup This a basic guide on how we can install Rocket.chat on Ubuntu LXC.\nThis is a part 1 of 2 part series. In this part, we will look into how to install MongoDB, NodeJS \u0026 Rocket.Chat and also configure them.\nIn the next part, we will see how to reverse proxy the localhost:3000 to a domain and install SSL certificate.\nRequirements Ubuntu: 20.04 NodeJS: 14.19.3 NPM: 6.14.17 Mongodb: 5.0 Installing Pre-requisites (NodeJS, NPM, \u0026 MongoDB) NodeJS \u0026 NPM We will be using nvm to install NodeJS and NPM.\nSteps: Install NVM\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | shell List all available NodeJS version\nnvm ls-remote Install specified NodeJS version, in our case it v14.19.3.\nnvm install v14.19.3 Check NPM version\nnpm -v 6.14.17 MongoDB We will be adding MongoDB from official repo, which is not in default Ubuntu LXC source list.\nSteps:\nInstall gnupg\nsudo apt install gnupg Import mongodb key\nwget -qO - https://www.mongodb.org/static/pgp/server-5.0.asc | sudo apt-key add - Create the list file\n/etc/apt/sources.list.d/mongodb-org-5.0.list Add repo url to source list file\necho \"deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/5.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list Update local package db\nsudo apt-get update Install MongoDB\nsudo apt-get install -y mongodb-org Installing Rocket.Chat Install dependencies\nsudo apt install -y curl build-essential graphicsmagick Download Rocket.Chat binary:\ncurl -L https://releases.rocket.chat/latest/download -o /tmp/rocket.chat.tgz Extract the archive\ntar -xzf /tmp/rocket.chat.tgz -C /tmp Install npm packages:\ncd /tmp/bundle/programs/server \u0026\u0026 npm install --production NOTE: If you’re using the root account (not recommended), you’ll have to use sudo npm install --unsafe-perm --production instead of the above.\nCopy built package to /opt folder\nsudo mv /tmp/bundle /opt/Rocket.Chat Configure the Rocket.Chat service Add the rocketchat user\nsudo useradd -M rocketchat \u0026\u0026 sudo usermod -L rocketchat Set the right permissions on the Rocket.Chat folder\nsudo chown -R rocketchat:rocketchat /opt/Rocket.Chat Save node path in variable to pass it on service file\nNODE_PATH=$(which node) Create \u0026 save the systemd service file\ncat \u003c\u003c EOF |sudo tee -a /lib/systemd/system/rocketchat.service [Unit] Description=The Rocket.Chat server After=network.target remote-fs.target nss-lookup.target nginx.service mongod.service [Service] ExecStart=$NODE_PATH /opt/Rocket.Chat/main.js StandardOutput=syslog StandardError=syslog SyslogIdentifier=rocketchat User=rocketchat [Install] WantedBy=multi-user.target EOF Passing environment variables Pass some environment variables to the running process.\nFor more information of configuring via environment variables read this article.\nRun:\nsudo systemctl edit rocketchat It will open in vim or nano based on your system. Now, write the following in the file\n[Service] Environment=ROOT_URL=http://localhost:3000 Environment=PORT=3000 Environment=MONGO_URL=mongodb://localhost:27017/rocketchat?replicaSet=rs01 Environment=MONGO_OPLOG_URL=mongodb://localhost:27017/local?replicaSet=rs01 Change the values as you need. Save and exit.\nMongoDB Configuration MongoDB config file should look something like the following:\nstorage: dbPath: /var/lib/mongodb journal: enabled: true engine: wiredTiger systemLog: destination: file logAppend: true path: /var/log/mongodb/mongod.log net: port: 27017 bindIp: 127.0.0.1 processManagement: fork: true timeZoneInfo: /usr/share/zoneinfo replication: replSetName: rs01 Start MongoDB with the following command:\nsudo systemctl enable --now mongod If MongoDB is already started, do a restart of the service\nsudo systemctl restart mongod Create the replicaset:\nmongo --eval \"printjson(rs.initiate())\" You can start Rocket.Chat now.\nsudo systemctl enable --now rocketchat Related Links Rocket.Chat Doc Proxmox VE NVM MongoDB Doc ","wordCount":"491","inLanguage":"en","datePublished":"2022-09-05T00:00:00Z","dateModified":"2022-09-05T00:00:00Z","author":{"@type":"Person","name":"Masumul Hassan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://masum.me/posts/rocket-chat-setup-on-lxc/"},"publisher":{"@type":"Organization","name":"The 8-bit Brain","logo":{"@type":"ImageObject","url":"https://masum.me/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://masum.me accesskey=h title="The 8-bit Brain (Alt + H)">The 8-bit Brain</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://masum.me/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://masum.me/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://masum.me/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://masum.me/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://masum.me>Home</a>&nbsp;»&nbsp;<a href=https://masum.me/posts/>Posts</a></div><h1 class=post-title>Rocket.chat Setup on LXC Container</h1><div class=post-meta><span title='2022-09-05 00:00:00 +0000 UTC'>September 5, 2022</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Masumul Hassan</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#rocketchat-setup aria-label="Rocket.chat Setup">Rocket.chat Setup</a></li><li><a href=#requirements aria-label=Requirements>Requirements</a></li><li><a href=#installing-pre-requisites-nodejs-npm--mongodb aria-label="Installing Pre-requisites (NodeJS, NPM, &amp;amp; MongoDB)">Installing Pre-requisites (NodeJS, NPM, & MongoDB)</a><ul><li><a href=#nodejs--npm aria-label="NodeJS &amp;amp; NPM">NodeJS & NPM</a></li><li><a href=#mongodb aria-label=MongoDB>MongoDB</a></li></ul></li><li><a href=#installing-rocketchat aria-label="Installing Rocket.Chat">Installing Rocket.Chat</a></li><li><a href=#configure-the-rocketchat-service aria-label="Configure the Rocket.Chat service">Configure the Rocket.Chat service</a><ul><li><a href=#passing-environment-variables aria-label="Passing environment variables">Passing environment variables</a></li><li><a href=#mongodb-configuration aria-label="MongoDB Configuration">MongoDB Configuration</a></li></ul></li><li><a href=#related-links aria-label="Related Links">Related Links</a></li></ul></div></details></div><div class=post-content><h2 id=rocketchat-setup>Rocket.chat Setup<a hidden class=anchor aria-hidden=true href=#rocketchat-setup>#</a></h2><p>This a basic guide on how we can install Rocket.chat on Ubuntu LXC.</p><p>This is a part 1 of 2 part series. In this part, we will look into how to install MongoDB, NodeJS & Rocket.Chat and also configure them.</p><p>In the next part, we will see how to reverse proxy the localhost:3000 to a domain and install SSL certificate.</p><h2 id=requirements>Requirements<a hidden class=anchor aria-hidden=true href=#requirements>#</a></h2><ul><li>Ubuntu: <code>20.04</code></li><li>NodeJS: <code>14.19.3</code></li><li>NPM: <code>6.14.17</code></li><li>Mongodb: <code>5.0</code></li></ul><h2 id=installing-pre-requisites-nodejs-npm--mongodb>Installing Pre-requisites (NodeJS, NPM, & MongoDB)<a hidden class=anchor aria-hidden=true href=#installing-pre-requisites-nodejs-npm--mongodb>#</a></h2><h3 id=nodejs--npm>NodeJS & NPM<a hidden class=anchor aria-hidden=true href=#nodejs--npm>#</a></h3><p>We will be using nvm to install NodeJS and NPM.</p><p>Steps:
Install NVM</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh <span class=p>|</span> shell
</span></span></code></pre></div><p>List all available NodeJS version</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>nvm ls-remote
</span></span></code></pre></div><p>Install specified NodeJS version, in our case it v14.19.3.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>nvm install v14.19.3
</span></span></code></pre></div><p>Check NPM version</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>npm -v
</span></span><span class=line><span class=cl>6.14.17
</span></span></code></pre></div><h3 id=mongodb>MongoDB<a hidden class=anchor aria-hidden=true href=#mongodb>#</a></h3><p>We will be adding MongoDB from official repo, which is not in default Ubuntu LXC source list.</p><p>Steps:</p><p>Install gnupg</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt install gnupg
</span></span></code></pre></div><p>Import mongodb key</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>wget -qO - https://www.mongodb.org/static/pgp/server-5.0.asc <span class=p>|</span> sudo apt-key add -
</span></span></code></pre></div><p>Create the list file</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>/etc/apt/sources.list.d/mongodb-org-5.0.list
</span></span></code></pre></div><p>Add repo url to source list file</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/5.0 multiverse&#34;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list
</span></span></code></pre></div><p>Update local package db</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt-get update
</span></span></code></pre></div><p>Install MongoDB</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt-get install -y mongodb-org
</span></span></code></pre></div><h2 id=installing-rocketchat>Installing Rocket.Chat<a hidden class=anchor aria-hidden=true href=#installing-rocketchat>#</a></h2><p>Install dependencies</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt install -y curl build-essential graphicsmagick
</span></span></code></pre></div><p>Download Rocket.Chat binary:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>curl -L https://releases.rocket.chat/latest/download -o /tmp/rocket.chat.tgz
</span></span></code></pre></div><p>Extract the archive</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>tar -xzf /tmp/rocket.chat.tgz -C /tmp
</span></span></code></pre></div><p>Install npm packages:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> /tmp/bundle/programs/server <span class=o>&amp;&amp;</span> npm install --production
</span></span></code></pre></div><blockquote><p><strong>NOTE:</strong> If you&rsquo;re using the <code>root</code> account (not recommended), you&rsquo;ll have to use <code>sudo npm install --unsafe-perm --production</code> instead of the above.</p></blockquote><p>Copy built package to /opt folder</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo mv /tmp/bundle /opt/Rocket.Chat
</span></span></code></pre></div><h2 id=configure-the-rocketchat-service>Configure the Rocket.Chat service<a hidden class=anchor aria-hidden=true href=#configure-the-rocketchat-service>#</a></h2><p>Add the rocketchat user</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo useradd -M rocketchat <span class=o>&amp;&amp;</span> sudo usermod -L rocketchat
</span></span></code></pre></div><p>Set the right permissions on the Rocket.Chat folder</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo chown -R rocketchat:rocketchat /opt/Rocket.Chat
</span></span></code></pre></div><p>Save node path in variable to pass it on service file</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>NODE_PATH</span><span class=o>=</span><span class=k>$(</span>which node<span class=k>)</span>
</span></span></code></pre></div><p>Create & save the systemd service file</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat <span class=s>&lt;&lt; EOF |sudo tee -a /lib/systemd/system/rocketchat.service
</span></span></span><span class=line><span class=cl><span class=s>[Unit]
</span></span></span><span class=line><span class=cl><span class=s>Description=The Rocket.Chat server
</span></span></span><span class=line><span class=cl><span class=s>After=network.target remote-fs.target nss-lookup.target nginx.service mongod.service
</span></span></span><span class=line><span class=cl><span class=s>[Service]
</span></span></span><span class=line><span class=cl><span class=s>ExecStart=$NODE_PATH /opt/Rocket.Chat/main.js
</span></span></span><span class=line><span class=cl><span class=s>StandardOutput=syslog
</span></span></span><span class=line><span class=cl><span class=s>StandardError=syslog
</span></span></span><span class=line><span class=cl><span class=s>SyslogIdentifier=rocketchat
</span></span></span><span class=line><span class=cl><span class=s>User=rocketchat
</span></span></span><span class=line><span class=cl><span class=s>[Install]
</span></span></span><span class=line><span class=cl><span class=s>WantedBy=multi-user.target
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><h3 id=passing-environment-variables>Passing environment variables<a hidden class=anchor aria-hidden=true href=#passing-environment-variables>#</a></h3><p>Pass some environment variables to the running process.</p><p>For more information of configuring via environment variables read <a href=https://docs.rocket.chat/quick-start/environment-configuration/environment-variables>this article</a>.</p><p>Run:</p><pre tabindex=0><code>sudo systemctl edit rocketchat
</code></pre><p>It will open in vim or nano based on your system. Now, write the following in the file</p><pre tabindex=0><code>[Service]
Environment=ROOT_URL=http://localhost:3000
Environment=PORT=3000
Environment=MONGO_URL=mongodb://localhost:27017/rocketchat?replicaSet=rs01
Environment=MONGO_OPLOG_URL=mongodb://localhost:27017/local?replicaSet=rs01
</code></pre><p>Change the values as you need. Save and exit.</p><h3 id=mongodb-configuration>MongoDB Configuration<a hidden class=anchor aria-hidden=true href=#mongodb-configuration>#</a></h3><p>MongoDB config file should look something like the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>storage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>dbPath</span><span class=p>:</span><span class=w> </span><span class=l>/var/lib/mongodb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>journal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>engine</span><span class=p>:</span><span class=w> </span><span class=l>wiredTiger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>systemLog</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>destination</span><span class=p>:</span><span class=w> </span><span class=l>file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logAppend</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/var/log/mongodb/mongod.log</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>net</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>27017</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>bindIp</span><span class=p>:</span><span class=w> </span><span class=m>127.0.0.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>processManagement</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>fork</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>timeZoneInfo</span><span class=p>:</span><span class=w> </span><span class=l>/usr/share/zoneinfo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>replication</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replSetName</span><span class=p>:</span><span class=w> </span><span class=l>rs01</span><span class=w>
</span></span></span></code></pre></div><p>Start MongoDB with the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> --now mongod
</span></span></code></pre></div><p>If MongoDB is already started, do a restart of the service</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo systemctl restart mongod
</span></span></code></pre></div><p>Create the replicaset:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mongo --eval <span class=s2>&#34;printjson(rs.initiate())&#34;</span>
</span></span></code></pre></div><p>You can start Rocket.Chat now.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> --now rocketchat
</span></span></code></pre></div><h2 id=related-links>Related Links<a hidden class=anchor aria-hidden=true href=#related-links>#</a></h2><ol><li><a href=https://docs.rocket.chat/quick-start/deploying-rocket.chat/other-deployment-methods/manual-installation/debian-based-distros/ubuntu>Rocket.Chat Doc</a></li><li><a href=https://www.proxmox.com/en/proxmox-ve>Proxmox VE</a></li><li><a href=https://github.com/nvm-sh/nvm>NVM</a></li><li><a href=https://www.mongodb.com/docs/v5.0/tutorial/install-mongodb-on-ubuntu/>MongoDB Doc</a></li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://masum.me/tags/blog/>Blog</a></li><li><a href=https://masum.me/tags/setup/>Setup</a></li><li><a href=https://masum.me/tags/homelab/>Homelab</a></li><li><a href=https://masum.me/tags/proxmox/>Proxmox</a></li><li><a href=https://masum.me/tags/lxc/>LXC</a></li><li><a href=https://masum.me/tags/rocket.chat/>Rocket.chat</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://masum.me>The 8-bit Brain</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>